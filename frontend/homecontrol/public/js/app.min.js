'use scrict';
    
(function (angular) {

    var app = angular.module("homeDashboard", ["ngRoute"]);

    app.config(["$routeProvider",
        function ($routeProvider) {
            $routeProvider.
                when("/dashboard", {
                    templateUrl: "app/partials/dashboard.html",
                    controller: "dashboardController"
                })
                .otherwise({
                    redirectTo: "/dashboard"
                });
        }]);
    
})(angular);
(function (angular) {

    var appUrl = "api/app";

    function AppService($http) {

        function getAppInformation(callback) {
           
            /*
            $http.get(appUrl)
                .success(function (data) {
                    callback(null, data);
                })
                .error(function (data) {
                    callback(data, null);
                });
                */
        }

        return {
            getAppInformation: getAppInformation
        };
    }

    AppService.$inject = ["$http"];

    angular.module("homeDashboard")
        .factory("appService", AppService);

})(angular);
(function (angular) {

    function weatherService($http) {
        
        var url = 'http://localhost:20010/weather?callback=JSON_CALLBACK';
            
        function retrieveWeather(callback)
        {
            $http.jsonp(url)
            .success(function (result) {
                callback(null, result);
            })
            .error(function (err) {
                callback(err, null)
            });
        }
 
        return {
            'retrieveWeather' : retrieveWeather
        }
    }

    weatherService.$inject = ["$http"];

    angular.module("homeDashboard")
        .factory("weatherService", weatherService);

})(angular);
"use strict";
    
(function (angular) {

    function appController(appService, $scope) {

        function getAppInformation() {
            appService.getAppInformation(function (error, data) {
                $scope.appInformation = data.appInformation;
            });
        }

        getAppInformation();
    }

    appController.$inject = ['appService', '$scope'];

    angular.module('homeDashboard')
        .controller('appController', appController);

})(angular);
"use strict";

(function (angular) {

    function dashboardController(weatherService, $scope, $sce) {

        weatherService.retrieveWeather(function (err, result) {
            $scope.weather = result;
        });
    }

    dashboardController.$inject = ["weatherService", "$scope"];

    angular.module("homeDashboard")
        .controller("dashboardController", dashboardController);

})(angular);
"use strict";

(function (angular) {

    function TimeController($scope, $timeout) {
        $scope.clock = "loading clock..."; // initialise the time variable
        $scope.tickInterval = 1000; //ms

        var tick = function () {
            $scope.clock = Date.now(); // get the current time
            $timeout(tick, $scope.tickInterval); // reset the timer
        };

        // Start the timer
        $timeout(tick, $scope.tickInterval);
    }

    angular.module("homeDashboard")
        .controller("TimeController", TimeController);

})(angular);